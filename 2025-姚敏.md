# 每周总结

## 2025.10

### 10.30

#### 学习进度
1.将patchmatchnet的主要代码看完
2.仔细研究了一下IMGTR这篇论文
#### 研究进度

#### 下周计划
1.跑通老师发的工具
2.研究如何进行一个改造

### 11.6

#### 学习进度
1.用三角剖分工具处理完DTU数据集
2.读取三角剖分的数据，读取的有些问题<img width="1311" height="525" alt="image" src="https://github.com/user-attachments/assets/076da5fb-aedc-4f8e-a8ba-d14419371d69" />
3.修改了patchmatchnet 的dataloader
#### 研究进度

#### 下周计划
1.解决三角剖分数据读取的问题
3.要进行两次班内汇报

### 11.13
#### 学习进度
1.解决了三角剖分读取数据的问题，更改了一下dataloader<img width="980" height="800" alt="image" src="https://github.com/user-attachments/assets/4fd48358-21b8-4019-844b-ed76bb5f5b1c" /> 

2.主要在弄最优化和新中特汇报

#### 下周计划
1.进行patchmatchnet改造

### 11.20
#### 研究进度
1. 这一周修改了dataloader的一个bug,将三角剖分数据添加到MVSdataset的时候，getitem时报错了因为一个批次里面数据的大小不一致，导致default_collate报错，然后通过跳过cdt-data，并在后面单独放入Gpu中
<img width="1510" height="228" alt="image" src="https://github.com/user-attachments/assets/d10f98c5-eb23-4224-935e-967b6fd174f7" />
<img width="855" height="415" alt="image" src="https://github.com/user-attachments/assets/b182517f-5e5f-420e-b319-6fe466157552" />

2.添加了边断裂预测头，生成每个三角掩码，将它们的特征聚合成一个特征向量，深度是求平均深度<img width="1175" height="339" alt="image" src="https://github.com/user-attachments/assets/7c548bb1-66e7-4177-8aed-15e544203316" />



3.有一个问题就是原来是多尺度提取,如果不下采样图片的话，显存过大会崩，采样过小会导致小三角形占不到一个像素，导致三角形掩码没有<img width="1304" height="508" alt="070d53cc242bf3cf6c1f8f354c6618c5" src="https://github.com/user-attachments/assets/b50a79a5-a8c2-44aa-9e39-7faf73eab120" />

### 11.27
#### 研究进度
1. 更改了边断裂预测头实现方式，从三角掩码生成特征向量，变为三个顶点加质点进行生成特征向量，深度采取四个点平均深度，因为现在是基于像素点，等之后得到平面方程的时候深度差变为共享边顶点深度差<img width="614" height="621" alt="image" src="https://github.com/user-attachments/assets/cdd76029-5b32-4aab-a396-6c5af6c668f3" />

2. 绘制了边断裂概率图，蓝(0.0) -> 青 -> 黄 -> 红(1.0)目前还没训练完<img width="924" height="468" alt="image" src="https://github.com/user-attachments/assets/8e7a7449-b33e-4881-a75a-9a0b182a2a7d" />
 

3. 修改完毕，但是训练的过程中突然出现深度图和特征图包含nan值，进行一个数据清洗保护操作之后，损失函数中，发现原本的depth-loss出现nan情况，而边断裂预测头loss正常，准备回滚一下版本看看是什么导致的

#### 下周计划
1. 训练出正常的变断裂概率图
2. 研究一下平面假设和传播

### 12.4
#### 研究进度
1. 训练结果非常差劲，损失函数图还是可以
2. 修改了评估的代码，出来的深度图有点问题，仔细看看哪里有问题


